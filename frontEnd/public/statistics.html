<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="/icons/logo.png" />
    <link rel="stylesheet" href="./styles.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script type="module">
      import { loadHTMLWithScriptAndCallback } from "./HTMLLoader.js";
      import { updateNavbarDisplay } from "./navbar.js";
      import { fetchItems } from "./statisticsModule.js";

      // Call loadHTMLWithScript function to include navbar.html, load navbar.js and update cart item count
      loadHTMLWithScriptAndCallback(
        "navbar.html",
        "navbar",
        "navbar.js",
        updateNavbarDisplay
      );

      // Add event listeners
      document
        .getElementById("searchButton")
        .addEventListener("click", function () {
          const groupByOption = document.getElementById("groupByOption").value;
          fetchItems(groupByOption);
        });
    </script>
    <title>Show statistics</title>
  </head>
  <body>
    <div class="page-container">
      <header>
        <div id="navbar"></div>
      </header>

      <main>
        <section>
          <h1>Show Statistics</h1>

          <!-- Dropdown for group by option -->
          <select id="groupByOption">
            <option value="category">Category</option>
            <option value="madeIn">Made In</option>
            <option value="color">Color</option>
            <option value="distributor">Brand</option>
            <option value="quality">Quality</option>
          </select>

          <!-- Search button -->
          <button id="searchButton" class="AREAButton">
            <img src="/icons/view.png" alt="Submit Icon" /> View
          </button>          

          <div id="itemList">
            <!-- Item list will be dynamically populated here -->
          </div>
        </section>
        <section>
          <!-- Container for charts -->
          <div class="charts-container">
            <div
              id="graph1"
              class="chart"
              style="width: 600px; height: 600px"
            ></div>
            <div
              id="graph2"
              class="chart"
              style="width: 600px; height: 600px"
            ></div>
          </div>
        </section>
      </main>

      <footer>
        <p>AREA @ 2024</p>
      </footer>
    </div>
  </body>
</html>
